<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//EN"
               "http://www.oasis-open.org/docbook/xml/4.1.2/docbookx.dtd" [
]>
<chapter id="common-conventions">
  <title>Common Conventions</title>

  <section>
    <title>Portal requests</title>
    <para>
      Requests made via portal interfaces generally involve user interaction.
    </para>
    <para>
      The general flow of the portal API is that the application makes
      a portal request, the portal replies to that method call with a
      handle (i.e. object path) to Request object that corresponds to the
      request. The object is exported on the bus and stays alive as long
      as the user interaction lasts. When the user interaction is over,
      the portal sends a Response signal back to the application with
      the results from the interaction, if any.
    </para>
  </section>
  <section id="parent_window"> 
    <title>Parent window identifiers</title>
    <para>
      Most portals interact with the user by showing dialogs. These dialogs
      should generally be placed on top of the application window that triggered
      them. To arrange this, the compositor needs to know about the application
      window. Many portal requests expect a "parent_window" string argument for
      this reason.
    </para>
    <para>
      Under X11, the "parent_window" argument should have the form
      "x11:<replaceable>XID</replaceable>", where <replaceable>XID</replaceable>
      is the XID of the application window.
    </para>
    <para>
      Under Wayland, it should have the form "wayland:<replaceable>HANDLE</replaceable>",
      where <replaceable>HANDLE</replaceable> is a surface handle obtained with the
      <ulink url="https://github.com/wayland-project/wayland-protocols/blob/master/unstable/xdg-foreign/xdg-foreign-unstable-v2.xml">xdg_foreign</ulink> protocol.
    </para>
    <para>
      For other windowing systems, or if you don't have a suitable handle, just
      pass an empty string for "parent_window".
    </para>
  </section>
</chapter>
